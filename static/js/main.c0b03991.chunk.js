(this["webpackJsonpquiport-frontend"]=this["webpackJsonpquiport-frontend"]||[]).push([[0],{46:function(e,t,a){},47:function(e,t,a){},75:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),s=a(19),c=a.n(s),i=(a(46),a(47),a(14)),o=a(3),d=a(4),l=a(8),u=a(7),j=a(11),b=a(21),p=a(2);b.a.register.apply(b.a,Object(j.a)(b.b));var h=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).canvasRef=n.a.createRef(),r}return Object(d.a)(a,[{key:"componentDidUpdate",value:function(){this.myChart.data.labels=this.props.data.map((function(e){return e.time})),this.myChart.data.datasets[0].data=this.props.data.map((function(e){return e.accident})),this.myChart.data.datasets[1].data=this.props.data.map((function(e){return e.fire})),this.myChart.update()}},{key:"componentDidMount",value:function(){this.myChart=new b.a(this.canvasRef.current,{type:"line",options:{interaction:{intersect:!1},radius:0,plugins:{title:{display:!0,text:this.props.title}},scales:{x:{title:{display:!0,text:"Date: "+(new Date).toLocaleDateString()}},y:{title:{display:!0,text:"1 = Detected"},min:0,max:1.5,ticks:{stepSize:1}}}},data:{labels:this.props.data.map((function(e){return e.time})),datasets:[{label:"Accident",data:this.props.data.map((function(e){return e.accident})),backgroundColor:"blue",borderColor:"rgb(122, 136, 255)"},{label:"Fire",data:this.props.data.map((function(e){return e.fire})),backgroundColor:"red",borderColor:"rgb(255, 130, 130)"}]}})}},{key:"render",value:function(){return Object(p.jsx)("canvas",{ref:this.canvasRef})}}]),a}(n.a.Component),m=a(77),f=a(78),O=a(79),x=a(37),g=a.n(x),v=a(25),y=function(e){var t=e.reports,a=Object(r.useState)(null),n=Object(i.a)(a,2),s=n[0],c=n[1];return Object(r.useEffect)((function(){c(t.reverse())}),[t]),Object(p.jsx)("div",{className:"reportlist",children:s&&s.map((function(e){return Object(p.jsxs)(m.a,{className:"mt-2",children:[Object(p.jsx)(f.a,{sm:5,children:Object(p.jsx)(O.a,{alt:e.uid,src:e.imageUrl,thumbnail:!0})}),Object(p.jsxs)(f.a,{sm:7,children:[Object(p.jsxs)("div",{className:"mb-1",children:["Fire"===e.categories[0]?Object(p.jsx)("span",{className:"myBadgeR",children:"Fire"}):"","Accident"===e.categories[1]?Object(p.jsx)("span",{className:"myBadgeB",children:"Accident"}):""]}),Object(p.jsx)(v.b,{})," ",Object(p.jsx)(g.a,{fromNow:!0,children:e.date}),Object(p.jsxs)("p",{style:{marginBottom:0},children:[Object(p.jsx)(v.a,{}),e.address_components.address," ",Object(p.jsx)("a",{target:"_blank",rel:"noreferrer",href:"https://maps.google.com/?q="+e.address_components.latitude+","+e.address_components.longitude,children:"See Location"})]}),Object(p.jsx)(v.c,{})," From: ",e.email]})]})}))})},D=a(83),C=function(e){var t=e.reports,a=Object(r.useState)(null),n=Object(i.a)(a,2),s=n[0],c=n[1];return Object(r.useEffect)((function(){var e=[],a=(new Date).toLocaleDateString();return t.filter((function(e){if(e.hasOwnProperty("ai_results")){var t=e.createdAt;return new Date(t).toLocaleDateString()===a}})).map((function(t){var a=t.uid,r=t.address_components,n=t.imageUrl,s=t.email,c=new Date(t.createdAt),i=c.getHours()+" : "+c.getMinutes(),o=t.ai_results.detected_class.fire,d=t.ai_results.detected_class.accident,l=t.ai_results.categories;e.push({uid:a,date:c,time:i,fire:o,accident:d,categories:l,address_components:r,imageUrl:n,email:s})})),c(e.sort((function(e,t){return new Date(e.date)-new Date(t.date)})))}),[t]),Object(p.jsxs)("div",{className:"dashboard",children:[s&&Object(p.jsx)(h,{data:s,title:"Realtime Detected Fire And Accident"}),Object(p.jsxs)(D.a,{className:"mt-4",border:"light",children:[Object(p.jsx)(D.a.Header,{children:Object(p.jsx)("h4",{style:{textAlign:"center"},children:"Today's Report"})}),Object(p.jsx)(D.a.Body,{children:s&&Object(p.jsx)(y,{reports:s})})]})]})},w=a(80),_=a(81),N=a(82),S=a(38),k=a.n(S),A=function(e){var t=Object(r.useState)(null),a=Object(i.a)(t,2),n=a[0],s=a[1],c=Object(r.useState)(!0),o=Object(i.a)(c,2),d=o[0],l=o[1],u=Object(r.useState)(null),j=Object(i.a)(u,2),b=j[0],p=j[1];return Object(r.useEffect)((function(){k.a.get(e).then((function(e){if(200!==e.status)throw Error("Could not fetch the data for that resource");return e.data})).then((function(e){s(e.data),l(!1),p(null)})).catch((function(e){l(!1),p(e.message)}))}),[e]),{data:n,isLoading:d,isError:b}};var L=function(){var e=A("https://quiport.et.r.appspot.com/api/report"),t=e.data,a=e.isLoading,r=e.isError;return Object(p.jsx)(w.a,{fluid:!0,className:"p-3",children:Object(p.jsx)(_.a.Container,{id:"left-tabs-example",defaultActiveKey:"first",children:Object(p.jsxs)(m.a,{children:[Object(p.jsx)(f.a,{sm:2,children:Object(p.jsx)(N.a,{variant:"pills",className:"flex-column",children:Object(p.jsx)(N.a.Item,{className:"",children:Object(p.jsx)(N.a.Link,{eventKey:"first",children:"Monitor"})})})}),Object(p.jsx)(f.a,{sm:9,children:Object(p.jsx)(_.a.Content,{children:Object(p.jsxs)(_.a.Pane,{eventKey:"first",children:[r&&Object(p.jsx)("div",{children:r}),a&&Object(p.jsx)("div",{children:"Loading data ..."}),t&&Object(p.jsx)(C,{reports:t})]})})})]})})})};a(74);c.a.render(Object(p.jsx)(n.a.StrictMode,{children:Object(p.jsx)(L,{})}),document.getElementById("root"))}},[[75,1,2]]]);
//# sourceMappingURL=main.c0b03991.chunk.js.map